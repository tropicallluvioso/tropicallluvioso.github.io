---
import MainLayout from "../../layouts/MainLayout.astro"
import '../../styles/main.css';
import "../../styles/project.css";
import '../../styles/slideshow.css';

export async function getStaticPaths() {

const response = await fetch('https://raw.githubusercontent.com/smosgasbord/fedePortfolio/main/db.json');
const data = await response.json();


const projects = data.es.production

console.log(projects)
  return projects.map(({ id, ficha, sinopsis, galeria, tituloProyecto }) => {

    return {
      params: { id },
      props: { ficha, sinopsis, galeria, tituloProyecto}
    };
  });
}

const { id } = Astro.params;
const {  ficha, sinopsis, galeria, tituloProyecto } = Astro.props;



---
<MainLayout>

<div class="after-header-space"></div>
<h1 class="center-content">{tituloProyecto}</h1>
<div class="center-self">
<div class="tabordion">

  <figure id="section1">
  
    <input type="radio" name="sections" id="option1" checked>
    <label for="option1"> Galer√≠a</label>
    <article>
    <h2>Galeria</h2>
    <div class="container-slides">
     {galeria.map((image) =>  
      <img loading="lazy" class="slide" src={`https://ucarecdn.com/${image.image.id}/`} alt=""
      >)}
    </container-slides>
    </article>
    </figure>
    
    <figure id="section2">
      <input type="radio" name="sections" id="option2" checked>
      <label for="option2">Ficha</label>
      <article>
        <h2>Ficha</h2>
        <p>{ficha}</p>
      </article>
    </figure>
    <figure id="section3">
      <input type="radio" name="sections" id="option3" checked>
      <label for="option3">Sinopsis</label>
      <article>
        <h2>Sinopsis</h2>
        <p>{sinopsis}</p>
      </article>
    </figure>
</div></div>
</MainLayout>